Informe de Investigación Técnica Exhaustiva: Arquitectura, Implementación y Estrategia Operativa para Proveedores de Software Independientes (ISV) en el Ecosistema Chattigo1. Resumen Ejecutivo y Visión EstratégicaEn el panorama actual de la orquestación de comunicaciones empresariales, la dicotomía entre la provisión de infraestructura pura y la entrega de valor agregado es fundamental. Chattigo, posicionada como una plataforma conversacional omnicanal robusta, ofrece una distinción arquitectónica crítica para los desarrolladores y empresas de software: la separación entre el rol de Socio de Soluciones Empresariales (BSP - Business Solution Partner) y el de Proveedor de Software Independiente (ISV - Independent Software Vendor). Este informe técnico tiene como objetivo desglosar, con un nivel de detalle granular y exhaustivo, la metodología operativa, los protocolos de interfaz y las estrategias de implementación exclusiva para entidades que operan bajo el modelo ISV dentro del ecosistema Chattigo.El modelo ISV de Chattigo no es simplemente una revenda de capacidad de mensajería; es una arquitectura de integración profunda conocida como Bot-Chattigo ISV Connect.1 Esta arquitectura permite a las empresas de software inyectar lógica de negocio personalizada, gestionar flujos conversacionales complejos y orquestar respuestas automatizadas sin incurrir en la carga administrativa y de infraestructura que conlleva ser un BSP directo de Meta. A diferencia del BSP, que gestiona los contenedores de la API de WhatsApp y la facturación directa con Meta, el ISV se centra en la capa de aplicación, utilizando los rieles de infraestructura de Chattigo para entregar soluciones verticales (por ejemplo, banca, retail, seguros) a sus clientes finales.Este documento excluye deliberadamente los procesos de configuración de bajo nivel de los BSP (como la gestión de Docker o la conexión directa a la API Cloud de Meta para hosting) para centrarse exclusivamente en las capacidades, endpoints y flujos de trabajo pertinentes para el ISV. Se abordarán desde los mecanismos de autenticación segura JWT hasta la ingeniería de payloads para envíos masivos HSM (High Structured Messages), pasando por la gestión de tenencia múltiple en el Portal de Partners.2. Arquitectura del Ecosistema ISV en Chattigo2.1 Definición y Alcance del Modelo ISVEl Proveedor de Software Independiente (ISV) en el contexto de Chattigo se define como una entidad que desarrolla aplicaciones, CRMs, o bots especializados y requiere conectividad con canales de mensajería (principalmente WhatsApp Business API) para sus clientes, pero que elige delegar la gestión de la conectividad subyacente a Chattigo.La propuesta de valor técnica del modelo ISV reside en la abstracción. Mientras que la API nativa de WhatsApp requiere una gestión compleja de certificados, encriptación de extremo a extremo y mantenimiento de sesiones de 24 horas, la API de ISV de Chattigo actúa como un middleware normalizador.Abstracción de Protocolo: El ISV interactúa con endpoints RESTful simplificados que traducen las intenciones de negocio (ej. "enviar confirmación de compra") en las estructuras de datos complejas requeridas por Meta.Gestión de Sesiones: Aunque el ISV debe ser consciente de la ventana de servicio de 24 horas de WhatsApp, la infraestructura de Chattigo maneja los "handshakes" y la validación de tokens de sesión con la red de WhatsApp.Capacidad Híbrida: Una característica distintiva documentada es la capacidad de coexistencia. La arquitectura permite que un bot desarrollado por el ISV gestione la conversación inicialmente y, si la lógica lo dicta, el flujo puede ser transferido o supervisado a través de la interfaz de Chattigo, permitiendo modelos de atención híbrida (Bot + Humano).22.2 Topología de Conexión: ISV-BOT ConnectEl núcleo de la integración reside en la API denominada ISV-BOT Connect. Esta interfaz está diseñada específicamente para permitir una interacción bidireccional fluida entre los sistemas externos del ISV y el motor de procesamiento de Chattigo (BotChattigo).1La topología funciona bajo un esquema de "Webhook + API REST".Flujo de Entrada (Inbound): Cuando un usuario final envía un mensaje a una línea de WhatsApp gestionada por el ISV, Chattigo actúa como el primer receptor. En lugar de procesarlo internamente, el sistema identifica la configuración del ISV y "empuja" (push) el mensaje hacia un endpoint configurado por el ISV (Webhook Personalizado).1Procesamiento Lógico: El servidor del ISV recibe la carga útil, ejecuta su lógica de negocio (consulta bases de datos, invoca IAs externas, actualiza CRMs) y determina la respuesta.Flujo de Salida (Outbound): El ISV envía la respuesta instruida de vuelta a los endpoints de Chattigo, que se encargan de la entrega final al dispositivo del usuario.Esta separación de responsabilidades permite que el ISV mantenga la soberanía de los datos y la lógica de negocio, utilizando a Chattigo estrictamente como una capa de transporte y gestión de canal.3. Protocolos de Seguridad y AutenticaciónLa seguridad en la integración ISV es crítica, dado que el proveedor de software actúa como un concentrador para múltiples clientes finales (tenants). Un fallo en la seguridad del ISV podría comprometer los datos de múltiples empresas. Chattigo implementa un esquema de autenticación basado en JSON Web Tokens (JWT), un estándar de industria robusto para la transmisión segura de información entre partes.3.1 Mecanismo de Autenticación (Endpoint /login)El acceso a cualquiera de los recursos de la API ISV está protegido y requiere un token de portador (Bearer Token) válido. Este token no es estático; tiene un ciclo de vida definido que obliga a implementar una lógica de renovación de credenciales en el lado del ISV.Endpoint: POST /login 3Propósito: Intercambiar credenciales permanentes (usuario y contraseña) por un token de acceso temporal.Seguridad de Transporte: Todas las llamadas deben realizarse estrictamente sobre HTTPS para prevenir la interceptación de credenciales en texto plano.Estructura de la SolicitudLa solicitud de autenticación es directa pero fundamental. El cuerpo del mensaje debe contener las credenciales asignadas durante el proceso de registro en el Portal de Partners.Tabla 1: Parámetros del Cuerpo de Solicitud de LoginParámetroTipoObligatorioDescripciónusernameStringSíEl identificador de usuario único del ISV proporcionado por Chattigo.passwordStringSíLa clave de acceso secreta asociada al perfil del ISV.Ejemplo de Payload JSON:JSON{
  "username": "isv_empresa_x",
  "password": "SuperSecretPassword123!"
}
Análisis de la Respuesta y Gestión del Ciclo de Vida del TokenUna autenticación exitosa devuelve un código de estado 200 OK y un objeto JSON que contiene el access_token.Vigencia del Token: La documentación especifica que la vigencia del token es de 8 horas.3 Este es un parámetro crítico para la arquitectura del sistema del ISV.Riesgo Operativo: Si el ISV diseña su sistema para solicitar un token solo al inicio del día, corre el riesgo de que el token expire en medio de una operación crítica pasadas las 8 horas, resultando en errores 401 Unauthorized.Estrategia de Renovación (Best Practice): Se recomienda implementar un patrón de "Refresco Preventivo" (Pre-emptive Refresh). El sistema del ISV debe almacenar la marca de tiempo (timestamp) de la generación del token y programar una renovación automática (una nueva llamada a /login) cuando el token alcance el 90% de su vida útil (por ejemplo, a las 7 horas y 12 minutos). Esto garantiza una continuidad de servicio ininterrumpida.Manejo de Errores de Autenticación:400 Bad Request: Indica que la estructura del JSON enviado es inválida o faltan parámetros.401 Unauthorized: Indica credenciales incorrectas o, en el caso de llamadas subsecuentes a otros endpoints, que el token ha expirado.3.2 Autorización en Llamadas SubsiguientesUna vez obtenido el JWT, este debe ser inyectado en la cabecera HTTP de todas las solicitudes API dirigidas a Chattigo. El formato debe cumplir estrictamente con el estándar Bearer.Header Key: AuthorizationHeader Value: Bearer <JWT_STRING>El incumplimiento de este formato resultará en el rechazo inmediato de la solicitud por parte del gateway de API de Chattigo.4. Gestión de Señales de Entrada: Webhooks y Recepción de MensajesPara un ISV, la capacidad de reaccionar en tiempo real a los mensajes de los clientes es la base de cualquier servicio conversacional. Chattigo facilita esto a través de un mecanismo de Webhooks Personalizados, permitiendo al ISV suscribirse a los eventos de entrada.4.1 Configuración del Webhook de Salida (Outbound Webhook)Aunque la terminología puede parecer contraintuitiva ("Outbound Webhook" desde la perspectiva de Chattigo porque los datos "salen" de su plataforma hacia el ISV), este es el mecanismo para recibir los mensajes entrantes de los usuarios.1Endpoint de Configuración: PATCH /webhooks/outboundFunción: Este método permite al ISV registrar o actualizar dinámicamente la URL a la cual Chattigo enviará los eventos. Esto ofrece una gran flexibilidad, permitiendo cambiar entre entornos de desarrollo (staging) y producción sin intervención manual del soporte de Chattigo.Estructura de Configuración del WebhookTabla 2: Parámetros de Configuración de WebhookParámetroTipoDescripciónRestriccioneswaIdStringIdentificador del canal o línea de WhatsApp.Debe corresponder a un canal activo aprovisionado para el ISV.externalWebhookIsvBotStringLa URL del servidor del ISV que recibirá los mensajes.Debe ser HTTPS. Chattigo impone esta restricción para garantizar la privacidad de los datos en tránsito.Ejemplo de Payload de Configuración:JSON{
  "waId": "56912345678",
  "externalWebhookIsvBot": "https://api.mi-isv-fintech.com/v1/whatsapp/webhook"
}
4.2 Anatomía del Mensaje Entrante (Inbound Message)Cuando Chattigo reenvía un mensaje al endpoint configurado por el ISV, la estructura de datos es rica en contexto. Aunque la documentación resumida no desglosa cada campo del objeto entrante, basándonos en la estructura estándar de integración descrita en 1 y 1, el ISV debe estar preparado para procesar:Identidad del Remitente: El número de teléfono del usuario ( wa_id o similar) que permite al ISV correlacionar el mensaje con un registro de cliente en su base de datos.Tipo de Mensaje: Texto, imagen, ubicación, documento, etc.Cuerpo del Mensaje: El contenido textual o la URL del recurso multimedia.Marca de Tiempo: Cuándo fue recibido el mensaje por los servidores de WhatsApp.Consideraciones de Procesamiento para el ISV:Idempotencia: Es posible, debido a reintentos de red, que Chattigo envíe el mismo evento de webhook más de una vez. El sistema del ISV debe implementar lógica de idempotencia, rastreando los IDs de mensaje (message_id) procesados para evitar duplicar acciones (por ejemplo, evitar crear dos tickets de soporte idénticos).Latencia de Respuesta: Chattigo espera una confirmación HTTP (200 OK) rápida tras entregar el webhook. Si la lógica de negocio del ISV es pesada (ej. una consulta compleja a un mainframe bancario), se recomienda un patrón de arquitectura asíncrona: el ISV recibe el webhook, responde 200 OK inmediatamente para cerrar la transacción HTTP con Chattigo, encola el mensaje en un sistema de mensajería interno (como RabbitMQ o Kafka), y lo procesa en segundo plano.5. Motor de Mensajería Saliente: Respuestas y Envíos MasivosEl ISV tiene dos modos principales de comunicación hacia el usuario: responder a una sesión activa (ventana de 24 horas) o iniciar una conversación mediante Plantillas de Mensajes (HSM).5.1 Configuración de Respuestas Bot (Session Messages)Para mantener una conversación fluida, el ISV utiliza la API para enviar respuestas directas. La documentación destaca la flexibilidad de formatos soportados, alineados con las capacidades multimedia de WhatsApp.1Estructura del Objeto de MensajeEl payload JSON para enviar un mensaje sigue una estructura polimórfica, donde el campo type determina la validación del resto del objeto.Tipos de Mensajes Soportados:text: Mensajes de texto simple.document: Archivos PDF, DOCX, etc. Requiere una URL pública accesible.image: JPG, PNG.video: MP4.sticker: WebP.audio: Archivos de voz.Ejemplo de Payload para Envío de Documento:JSON{
  "messaging_product": "whatsapp",
  "recipient_type": "individual",
  "to": "{{Numero-Telefonico-Destinatario}}",
  "type": "document",
  "document": {
    "link": "https://documentos.mi-isv.com/facturas/2025/FAC-001.pdf",
    "caption": "Adjunto encontrará su factura electrónica."
  }
}
Insight Técnico: Para los tipos multimedia (audio, document, image, sticker, video), la lógica es idéntica; solo cambia la referencia en el campo type y la clave dentro del objeto payload (ej. cambiar "document": {...} por "image": {...}). La respuesta exitosa del servidor será siempre un código 200.15.2 Estrategia de Envíos Masivos (Endpoint /inbound para HSM)Uno de los componentes más potentes para un ISV es la capacidad de orquestar campañas o notificaciones transaccionales masivas. Chattigo expone un endpoint curiosamente denominado /inbound (probablemente refiriéndose a la entrada al sistema de colas de Chattigo) optimizado para alto rendimiento.3Endpoint: POST /inboundEste endpoint permite el envío de Mensajes Altamente Estructurados (HSM - Highly Structured Messages) a múltiples destinatarios en una sola solicitud HTTP. Esta capacidad de "batching" es vital para la eficiencia de la red y para evitar la saturación de conexiones TCP/IP.Optimización de Carga Útil para HSMLa estructura permite definir un mensaje plantilla base y luego iterar sobre una lista de destinatarios (destinations), inyectando parámetros dinámicos específicos para cada usuario.Límite de Batch: La plataforma permite hasta 1000 destinatarios en cada envío.3 El ISV debe diseñar su sistema para agrupar notificaciones en lotes de 1000 antes de transmitir, optimizando drásticamente el throughput.Tabla 3: Desglose del Payload para Envíos MasivosCampoNivelDescripcióndidRaízIdentificador del canal remitente (Número de WhatsApp).typeRaízDebe ser estáticamente "HSM".hsmRaízDefine la estructura del componente, ej. botones.destinationsRaízArray de objetos destinatario. Aquí reside la potencia del endpoint.idDestinatariocustomer_message_id. ID único opcional para trazabilidad del lado del ISV.destinationDestinatarioNúmero de teléfono del cliente final.parametersDestinatarioArray de strings para reemplazar variables {{1}}, {{2}} en el cuerpo del template.buttonsParametersDestinatarioParámetros dinámicos para botones (ej. códigos de rastreo en URLs).headerParametersDestinatarioParámetros para cabeceras multimedia (ej. imagen personalizada por usuario).Escenario de Uso (Ejemplo Complejo):Imagine un ISV de logística que necesita notificar a 500 usuarios sobre el estado de su entrega. En lugar de 500 llamadas API, realiza una sola llamada.JSON{
  "did": "56955555555",
  "type": "HSM",
  "channel": "WHATSAPP",
  "hsm": { "component": { "buttons": [ { "index": 0 } ] } },
  "destinations": [
    {
      "id": "msg_001",
      "destination": "56911111111",
      "parameters": ["Juan Pérez", "En Camino"],
      "buttonsParameters": ["tracking_123"]
    },
    {
      "id": "msg_002",
      "destination": "56922222222",
      "parameters": ["Maria López", "Entregado"],
      "buttonsParameters": ["tracking_456"]
    }
  ]
}
Nota Crítica: El uso de este método es mandatorio para el envío de un mismo template a múltiples destinos para "mejorar el rendimiento de la plataforma".3 Ignorar esta directriz podría llevar a limitaciones de velocidad (rate limiting).6. Gestión Administrativa y Portal de PartnersLa integración técnica se sustenta sobre una relación comercial y administrativa gestionada a través del Portal de Partners de Chattigo. Para el ISV, este portal es su centro de comando (Command Center).6.1 Requisitos de Registro y OnboardingEl acceso a la API ISV no es público; requiere un proceso de alta como "Partner Estratégico". Chattigo busca socios que compartan la visión de transformar comunicaciones comerciales.4Datos Requeridos para el Alta 5:Identidad Corporativa: Nombre de la empresa, sitio web.Contacto Principal: Nombre, Apellido, Email, Teléfono.Credenciales de Acceso: Usuario y Contraseña (fundamentales para la autenticación API posterior).Plan de Negocio: Se requiere describir cómo se trabajará en conjunto ("Coméntanos cómo podemos trabajar en conjunto"), lo que implica que Chattigo evalúa la viabilidad técnica y comercial de la integración propuesta antes de otorgar acceso a los entornos de producción.6.2 Gestión de Tenants (Sub-cuentas)Una función esencial para el ISV es la capacidad de gestionar múltiples clientes finales (tenants) bajo su paraguas.Segregación de Datos: Cada cliente final gestionado por el ISV debe tener su propio espacio lógico. Aunque la documentación pública no revela un endpoint API explícito para la creación programática de sub-cuentas (una práctica común para evitar fraudes y mantener control de calidad en BSPs), el Portal de Partners ofrece formularios para "New customer registration" (Registro de nuevo cliente) y "Business reservation" (Reserva de negocio).6Flujo Operativo: El ISV registra al cliente en el portal. Una vez aprobado y aprovisionado el número (DID), el ISV recibe los identificadores necesarios (did, waId) para configurar los webhooks y realizar envíos en nombre de ese cliente específico.Facturación y SLAs: El portal permite monitorear métricas de éxito y casos de uso trimestrales, lo cual es vital para mantener el estatus de partner y evitar la terminación del contrato por inactividad ("Ensure an updated business plan and semi-annual billing to avoid being terminated").67. Integraciones Avanzadas y EcosistemaEl verdadero valor de un ISV se manifiesta en la capacidad de integrar el canal de WhatsApp con otros sistemas empresariales. Chattigo facilita esto mediante una arquitectura abierta.7.1 Integración con CRMs y Sistemas de TercerosLa documentación destaca que, aunque Chattigo posee integraciones nativas (Salesforce, Zendesk, SAP, Hubspot, etc.), el ISV puede construir sus propias conexiones personalizadas.2Mecanismo: Al recibir el webhook de entrada, el ISV no está limitado a responder inmediatamente. Puede utilizar ese disparador para crear o actualizar objetos en un CRM propietario o vertical (ej. un sistema de gestión hospitalaria o un ERP de manufactura).Trazabilidad: Una ventaja clave es que Chattigo centraliza la atención. Esto significa que incluso si un bot del ISV maneja la conversación, la trazabilidad de la información queda registrada en la plataforma de Chattigo, permitiendo la generación de métricas unificadas.27.2 Modelos de Atención Híbrida (Handoff)El ISV puede implementar flujos donde un bot atiende inicialmente y luego deriva a un humano.Contexto del Bot: Las conversaciones que el bot del ISV mantiene con el cliente son transferidas en su totalidad si se escala a un agente humano en la consola de Chattigo. Esto garantiza que el agente humano tenga el contexto completo ("on the same screen where you see what the client wrote, you can also see the conversation that they previously had with the bot").2Monitoreo en Tiempo Real: A diferencia de muchos competidores, Chattigo ofrece una interfaz de supervisión que permite ver en tiempo real las conversaciones entre clientes y agentes (o bots), lo cual es una herramienta poderosa para que el ISV ofrezca servicios de auditoría de calidad a sus clientes.28. Consideraciones Técnicas y Mejores Prácticas8.1 Gestión de Errores y Códigos de EstadoEl ISV debe implementar una gestión robusta de los códigos de respuesta HTTP devueltos por la API de Chattigo.Tabla 4: Interpretación de Códigos de Estado APICódigo HTTPSignificadoAcción Recomendada para el ISV200 OKÉxito.Procesar la respuesta. En envíos masivos, verificar el cuerpo para confirmar aceptación de todos los destinatarios.400 Bad RequestSolicitud Incorrecta.Error de sintaxis JSON o parámetros faltantes. No reintentar sin corregir el código. Loguear el error para depuración.401 UnauthorizedNo Autorizado.Token JWT expirado o inválido. Acción: Ejecutar rutina de renovación de token (POST /login) y reintentar la solicitud original.500 Internal Server ErrorError del Servidor.Fallo en el lado de Chattigo. Implementar estrategia de "Exponential Backoff" para reintentar después de unos segundos.8.2 Seguridad de Datos y CumplimientoComo ISV manejando datos de terceros, la seguridad es innegociable.Certificaciones: Chattigo posee certificaciones ISO 27001, 27017 y 27018.7 El ISV debe alinear sus prácticas de seguridad con estos estándares, especialmente en el manejo de datos en reposo y en tránsito.Webhooks Seguros: Dado que el ISV expone un endpoint público para recibir webhooks, debe asegurar este endpoint mediante validación de IP (si Chattigo provee rangos fijos) o mediante ofuscación de URL, además del uso obligatorio de HTTPS.9. Conclusión y Hoja de Ruta de ImplementaciónLa integración como ISV en Chattigo ofrece un camino acelerado para dotar de capacidades conversacionales avanzadas a cualquier software empresarial. Al abstraer la complejidad de la infraestructura BSP, Chattigo permite al ISV centrarse en la lógica de negocio.Para una implementación exitosa, se recomienda la siguiente hoja de ruta secuencial:Registro Administrativo: Completar el alta en el Portal de Partners 5 y obtener las credenciales de entorno de desarrollo.Desarrollo del Middleware de Autenticación: Implementar el servicio de obtención y renovación automática de tokens JWT.3Configuración de Receptores: Levantar un servidor HTTPS seguro y configurar el Webhook de salida (PATCH /webhooks/outbound).1Implementación de Lógica de Mensajería: Desarrollar los manejadores para mensajes entrantes y la lógica de envío de respuestas multimedia.Optimización Masiva: Implementar el endpoint /inbound con soporte para arrays de destinations para manejar notificaciones a escala.Pruebas de Integración: Validar los flujos híbridos y la visualización de datos en la consola de supervisión de Chattigo.Siguiendo esta arquitectura, el ISV puede desplegar soluciones escalables, seguras y altamente integradas, aprovechando la robustez de Chattigo como motor de comunicación subyacente.
