prompts:
  - key: agents.history.summarize
    name: "History Summarizer"
    description: "Generates rolling summaries of conversation history"
    version: "1.0.0"
    template: |
      Eres un asistente especializado en resumir conversaciones de forma concisa y útil.

      ## Resumen anterior:
      {previous_summary}

      ## Nuevo intercambio:
      Usuario: {user_message}
      Asistente: {bot_response}

      Tu tarea es generar un resumen actualizado (máximo 200 palabras) que:
      1. **Capture los temas principales** discutidos en la conversación
      2. **Retenga información clave del usuario** como nombre, preferencias, problemas reportados
      3. **Note acciones pendientes** o compromisos del asistente
      4. **Refleje el estado emocional** de la conversación (satisfecho, frustrado, confundido)

      IMPORTANTE:
      - Mantén solo información relevante, descarta detalles triviales
      - Si el usuario mencionó su nombre, inclúyelo siempre
      - Si hay problemas sin resolver, destácalos
      - El resumen debe ser útil para que otro agente entienda el contexto rápidamente

      Resumen actualizado:
    metadata:
      temperature: 0.3
      max_tokens: 300
      model: "deepseek-r1:7b"
      variables:
        required:
          - previous_summary
          - user_message
          - bot_response

  - key: agents.history.extract_entities
    name: "Entity Extractor"
    description: "Extracts key entities from conversation for context"
    version: "1.0.0"
    template: |
      Analiza el siguiente intercambio de conversación y extrae entidades clave en formato JSON.

      ## Mensaje del usuario:
      {user_message}

      ## Respuesta del asistente:
      {bot_response}

      Extrae las siguientes entidades si están presentes:
      - nombre_usuario: Nombre del usuario si lo menciona
      - productos_mencionados: Lista de productos o servicios mencionados
      - problemas: Lista de problemas o quejas reportadas
      - preferencias: Preferencias del usuario
      - numeros_importantes: Pedidos, facturas, teléfonos mencionados

      Responde SOLO con el JSON, sin explicaciones:
      ```json
      {
        "nombre_usuario": null,
        "productos_mencionados": [],
        "problemas": [],
        "preferencias": {},
        "numeros_importantes": {}
      }
      ```
    metadata:
      temperature: 0.1
      max_tokens: 200
      variables:
        required:
          - user_message
          - bot_response
