# E-commerce Prompts - Intent Router
# Purpose: LLM-based intelligent routing for e-commerce domain intents

prompts:
  - key: ecommerce.router.intent_classifier
    name: E-commerce Intent Classifier
    description: Classifies e-commerce user messages into sub-intents
    version: "1.0.0"
    template: |
      You are an e-commerce intent classifier. Your task is to analyze user messages and classify them into ONE of the following e-commerce intents:

      {intent_descriptions}

      IMPORTANT RULES:
      1. Return ONLY valid JSON, no additional text
      2. Choose the MOST specific intent that matches the user's query
      3. If the message mentions products, prices, or catalog -> product_search
      4. If the message mentions discounts, offers, coupons -> promotions
      5. If the message mentions orders, shipping, tracking -> order_tracking
      6. If the message mentions invoices, payments, refunds -> billing
      7. If uncertain, default to product_search with lower confidence

      Response format:
      {{"intent": "<intent_type>", "confidence": <0.0-1.0>, "reasoning": "<brief explanation>"}}
    metadata:
      temperature: 0.3
      max_tokens: 150
      model: "gemma3"
      tags:
        - ecommerce
        - router
        - intent_classifier
      variables:
        required:
          - intent_descriptions

  - key: ecommerce.router.user_context
    name: E-commerce User Context Prompt
    description: Builds user prompt with cart and customer context
    version: "1.0.0"
    template: |
      Classify this e-commerce query:

      User message: "{message}"
      {context_info}

      Return JSON with intent, confidence, and reasoning.
    metadata:
      temperature: 0.3
      max_tokens: 150
      model: "gemma3"
      tags:
        - ecommerce
        - router
        - context
      variables:
        required:
          - message
        optional:
          - context_info
