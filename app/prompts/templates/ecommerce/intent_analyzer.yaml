# Prompts for the E-commerce Intent Analyzer
prompts:
  - key: ecommerce.intent_analyzer.product_query
    name: E-commerce Product Query Intent Analysis
    description: Analyzes user queries for product search and extracts structured data.
    version: "1.0.0"
    template: |
      # USER MESSAGE
      "{message}"

      # INSTRUCTIONS
      You are analyzing a user's product inquiry for an e-commerce system. Extract the user's intent and respond with JSON:

      {{
        "intent": "show_general_catalog|search_specific_products|search_by_category|"
                  "search_by_brand|search_by_price|get_product_details",
        "search_terms": ["specific", "product", "terms"],
        "category": "category_name_or_null",
        "brand": "brand_name_or_null",
        "price_min": float_or_null,
        "price_max": float_or_null,
        "specific_product": "exact_product_name_or_null",
        "wants_stock_info": boolean,
        "wants_featured": boolean,
        "wants_sale": boolean,
        "action_needed": "show_featured|search_products|search_category|search_brand|search_price",
        "confidence": float_0_to_1,
        "user_emotion": "neutral|excited|frustrated|urgent|curious|disappointed"
      }}

      INTENT ANALYSIS:
      - show_general_catalog: User asks what products are available, general catalog inquiry
                              ("what products do you have", "show me your products")
      - search_specific_products: User wants specific products
                                   ("show me laptops", "I need a phone")
      - search_by_category: User mentions a specific category
      - search_by_brand: User mentions a specific brand
      - search_by_price: User mentions price range
      - get_product_details: User asks about a specific product

      For search_terms, only include meaningful product-related words, not filler words.

      CONFIDENCE SCORE (0.0-1.0):
      - 0.9-1.0: Very clear intent with specific details (brand, model, exact product name)
      - 0.7-0.9: Clear intent with some details (category, general product type)
      - 0.5-0.7: Moderate clarity, general inquiry
      - 0.3-0.5: Ambiguous intent, unclear what user wants
      - 0.0-0.3: Very unclear or off-topic message

      EMOTION ANALYSIS:
      Detect the user's emotional state from their message tone:
      - neutral: Calm, matter-of-fact inquiry ("show me laptops")
      - excited: Enthusiastic, eager to buy ("I need this now!", "wow!")
      - frustrated: Annoyed, having trouble finding what they need ("I can't find anything", "this is difficult")
      - urgent: Time-sensitive need ("I need it today", "ASAP", "quickly")
      - curious: Exploring options, browsing ("what do you have?", "just looking")
      - disappointed: Previous negative experience or unmet expectations ("still not what I want")
    metadata:
      temperature: 0.3
      max_tokens: 800
      model: "deepseek-r1:7b"
