# Pharmacy Domain - Person Resolution Templates
# Purpose: Multiple person/account management

prompts:
  - key: "pharmacy.person_resolution.own_or_other"
    name: "Own or Other Person"
    description: "Ask if consulting for self or someone else"
    version: "1.0.0"
    template: |
      La consulta es para vos o para otra persona?

      1. Para mi
      2. Para otra persona
    metadata:
      temperature: 0.5
      max_tokens: 100
      tags:
        - pharmacy
        - person_resolution
        - selection
      variables:
        required: []
        optional: []

  - key: "pharmacy.person_resolution.own_or_other_unclear"
    name: "Own or Other Unclear"
    description: "Clarify own or other person"
    version: "1.0.0"
    template: |
      No entendi. La consulta es para vos o para otra persona?

      Responde *1* (para mi) o *2* (para otra persona):
    metadata:
      temperature: 0.3
      max_tokens: 100
      tags:
        - pharmacy
        - person_resolution
        - clarification
      variables:
        required: []
        optional: []

  - key: "pharmacy.person_resolution.account_selection"
    name: "Account Selection"
    description: "Display accounts for selection"
    version: "1.0.0"
    template: |
      *SELECCION DE PERSONA*

      Tengo registradas varias personas para este numero:

      {persons_list}

      + Agregar otra persona

      Escribi el *numero* o el *nombre* de la persona:
    metadata:
      temperature: 0.3
      max_tokens: 400
      tags:
        - pharmacy
        - person_resolution
        - selection
      variables:
        required:
          - persons_list
        optional: []

  - key: "pharmacy.person_resolution.offer_existing_accounts"
    name: "Offer Existing Accounts"
    description: "Show existing accounts to choose from"
    version: "1.0.0"
    template: |
      Ya tenes {persons_count} persona(s) registrada(s) en este numero.

      Queres consultar con alguna de ellas?

      {persons_list}

      O escribi *NUEVA* para agregar otra persona.
    metadata:
      temperature: 0.5
      max_tokens: 300
      tags:
        - pharmacy
        - person_resolution
        - offer
      variables:
        required:
          - persons_count
          - persons_list
        optional: []

  - key: "pharmacy.person_resolution.account_selected"
    name: "Account Selected"
    description: "Confirm account selection"
    version: "1.0.0"
    template: |
      Seleccionado: *{selected_person_name}*
    metadata:
      temperature: 0.3
      max_tokens: 50
      tags:
        - pharmacy
        - person_resolution
        - selected
      variables:
        required:
          - selected_person_name
        optional: []

  - key: "pharmacy.person_resolution.account_unclear"
    name: "Account Selection Unclear"
    description: "Clarify account selection"
    version: "1.0.0"
    template: |
      No entendi tu seleccion.

      Por favor escribi el *numero* de la persona:

      {persons_list}
    metadata:
      temperature: 0.3
      max_tokens: 200
      tags:
        - pharmacy
        - person_resolution
        - clarification
      variables:
        required:
          - persons_list
        optional: []

  - key: "pharmacy.person_resolution.account_invalid"
    name: "Invalid Account Selection"
    description: "Invalid account number selected"
    version: "1.0.0"
    template: |
      Esa opcion no es valida.

      Por favor elegi un numero de la lista:

      {persons_list}
    metadata:
      temperature: 0.3
      max_tokens: 200
      tags:
        - pharmacy
        - person_resolution
        - validation
      variables:
        required:
          - persons_list
        optional: []

  - key: "pharmacy.person_resolution.name_verification"
    name: "Name Verification"
    description: "Request name for account verification"
    version: "1.0.0"
    template: |
      Por seguridad, ingresa el nombre completo de *{account_name}*:
    metadata:
      temperature: 0.3
      max_tokens: 100
      tags:
        - pharmacy
        - person_resolution
        - verification
      variables:
        required:
          - account_name
        optional: []

  - key: "pharmacy.person_resolution.name_mismatch"
    name: "Name Mismatch"
    description: "Name doesn't match account"
    version: "1.0.0"
    template: |
      El nombre no coincide con la cuenta seleccionada.

      Intento {retry_count}/3

      Por favor ingresa el nombre correctamente o escribe *CANCELAR*.
    metadata:
      temperature: 0.3
      max_tokens: 150
      tags:
        - pharmacy
        - person_resolution
        - validation
      variables:
        required: []
        optional:
          - retry_count

  - key: "pharmacy.person_resolution.escalation"
    name: "Escalation to Human"
    description: "Escalate to human support"
    version: "1.0.0"
    template: |
      *CONTACTO HUMANO*

      Entiendo que necesitas hablar con una persona.

      Podes contactarnos por:

      *Telefono:* {pharmacy_phone}
         Horario: {pharmacy_hours}

      *Email:* {pharmacy_email}
         Respondemos en menos de 24hs

      *Presencial:* {pharmacy_address}
    metadata:
      temperature: 0.3
      max_tokens: 300
      tags:
        - pharmacy
        - person_resolution
        - escalation
      variables:
        required:
          - pharmacy_phone
          - pharmacy_hours
          - pharmacy_email
          - pharmacy_address
        optional: []

  - key: "pharmacy.person_resolution.escalation_verification"
    name: "Escalation After Verification Failure"
    description: "Escalate after multiple verification failures"
    version: "1.0.0"
    template: |
      No pudimos verificar tu identidad despues de varios intentos.

      Por favor contacta a la farmacia directamente:
      {pharmacy_phone}
    metadata:
      temperature: 0.3
      max_tokens: 150
      tags:
        - pharmacy
        - person_resolution
        - escalation
      variables:
        required:
          - pharmacy_phone
        optional: []

  - key: "pharmacy.person_resolution.identifier_invalid"
    name: "Invalid Identifier"
    description: "Invalid DNI/identifier format"
    version: "1.0.0"
    template: |
      El formato del identificador no es valido.

      Por favor ingresa un *DNI* (8 digitos) o *CUIT* (11 digitos):
    metadata:
      temperature: 0.3
      max_tokens: 100
      tags:
        - pharmacy
        - person_resolution
        - validation
      variables:
        required: []
        optional: []

  - key: "pharmacy.person_resolution.identifier_not_found"
    name: "Identifier Not Found"
    description: "DNI/identifier not found in system"
    version: "1.0.0"
    template: |
      No encontre ninguna cuenta con ese documento.

      1. Intentar con otro documento
      2. Registrar nueva persona
      3. Volver al menu
    metadata:
      temperature: 0.3
      max_tokens: 150
      tags:
        - pharmacy
        - person_resolution
        - not_found
      variables:
        required: []
        optional: []

  - key: "pharmacy.person_resolution.request_other_dni"
    name: "Request Other Person DNI"
    description: "Request DNI for another person"
    version: "1.0.0"
    template: |
      Para consultar la cuenta de otra persona, necesito su documento.

      Por favor ingresa el *DNI* o *CUIT* de esa persona:
    metadata:
      temperature: 0.3
      max_tokens: 100
      tags:
        - pharmacy
        - person_resolution
        - request
      variables:
        required: []
        optional: []

  - key: "pharmacy.person_resolution.start_registration"
    name: "Start Registration"
    description: "Start new person registration flow"
    version: "1.0.0"
    template: |
      *REGISTRO DE NUEVA PERSONA*

      Vamos a registrar a otra persona para este numero.

      Por favor ingresa el *DNI* de la persona a registrar:
    metadata:
      temperature: 0.3
      max_tokens: 100
      tags:
        - pharmacy
        - person_resolution
        - registration
      variables:
        required: []
        optional: []

  - key: "pharmacy.person_resolution.request_identifier"
    name: "Request Identifier"
    description: "Generic request for identifier"
    version: "1.0.0"
    template: |
      Por favor ingresa tu *DNI* o *numero de cliente*:
    metadata:
      temperature: 0.3
      max_tokens: 50
      tags:
        - pharmacy
        - person_resolution
        - request
      variables:
        required: []
        optional: []

  - key: "pharmacy.person_resolution.welcome_request_dni"
    name: "Welcome and Request DNI"
    description: "Welcome message with DNI request"
    version: "1.0.0"
    template: |
      Hola! Soy el asistente virtual de *{pharmacy_name}*.

      Para brindarte un servicio personalizado, necesito identificarte.

      Por favor ingresa tu *DNI* o *numero de cliente*:
    metadata:
      temperature: 0.5
      max_tokens: 150
      tags:
        - pharmacy
        - person_resolution
        - welcome
      variables:
        required:
          - pharmacy_name
        optional: []

  - key: "pharmacy.person_resolution.fallback"
    name: "Person Resolution Fallback"
    description: "Fallback for person resolution"
    version: "1.0.0"
    template: |
      Por favor elegi una opcion de la lista o escribe *MENU* para volver.
    metadata:
      temperature: 0
      max_tokens: 50
      tags:
        - pharmacy
        - person_resolution
        - fallback
      variables:
        required: []
        optional: []
