# Pharmacy Domain - Data Query Prompts
# Purpose: Handle pharmacy data queries and lookups

prompts:
  - key: pharmacy.data_query.intent
    name: Pharmacy Data Query Intent
    description: Analyzes pharmacy data query intent
    version: "1.0.0"
    template: |
      Analyze this pharmacy query and determine the data type needed:

      Query: "{message}"

      Data types:
      - inventory: Stock levels, product availability
      - customer: Customer information, purchase history
      - prescription: Prescription records
      - sales: Sales data, transactions

      Return ONLY one word: inventory, customer, prescription, or sales
    metadata:
      temperature: 0.2
      max_tokens: 15
      tags:
        - pharmacy
        - data_query
        - intent
      variables:
        required:
          - message

  - key: pharmacy.data_query.response
    name: Pharmacy Data Query Response
    description: Generates response for pharmacy data queries
    version: "1.0.0"
    template: |
      Generate a response for the pharmacy data query:

      Query Type: {query_type}
      Data: {data}

      Provide a clear, professional response with the requested information.
    metadata:
      temperature: 0.5
      max_tokens: 300
      tags:
        - pharmacy
        - data_query
        - response
      variables:
        required:
          - query_type
          - data

  - key: pharmacy.data_query.analyze
    name: Data Query Analysis
    description: Analyzes and responds to specific data queries about the customer account
    version: "1.0.0"
    template: |
      Eres un asistente de farmacia. El cliente pregunta sobre datos especÃ­ficos de su cuenta.

      Cliente: {customer_name}
      Pregunta: "{user_message}"

      Datos de la cuenta:
      - Total pendiente: {total_debt}
      - Cantidad de facturas: {invoice_count}
      - Detalles: {debt_details}

      Responde de forma clara y directa a lo que preguntÃ³ el cliente.
      Si pregunta por cantidades especÃ­ficas, proporciona los nÃºmeros exactos.
      Si pregunta por fechas o vencimientos, menciona esa informaciÃ³n si estÃ¡ disponible.

      REGLAS:
      - Respuesta corta (3-4 oraciones mÃ¡ximo)
      - No uses emojis
      - SÃ© profesional pero amigable
      - Si no tienes la informaciÃ³n solicitada, indÃ­calo claramente
    metadata:
      temperature: 0.5
      max_tokens: 250
      variables:
        required:
          - customer_name
          - user_message
          - total_debt
        optional:
          - invoice_count
          - debt_details

  - key: pharmacy.data_query.no_data
    name: No Data Available Response
    description: Response when requested data is not available
    version: "1.0.0"
    template: |
      {customer_name}, no encontrÃ© informaciÃ³n relacionada con tu consulta en este momento.

      Si necesitas datos especÃ­ficos de tu cuenta, puedo ayudarte con:
      â€¢ Tu deuda total actual
      â€¢ Detalle de productos pendientes
      â€¢ Generar un link de pago

      Â¿Te gustarÃ­a consultar alguna de estas opciones?
    metadata:
      temperature: 0.3
      max_tokens: 150
      variables:
        required:
          - customer_name

  - key: pharmacy.data_query.error
    name: Data Query Error Response
    description: Response when an error occurs fetching data
    version: "1.0.0"
    template: |
      {customer_name}, disculpa, tuve un problema tÃ©cnico al consultar tus datos.

      Â¿PodrÃ­as intentar nuevamente en unos momentos?
    metadata:
      temperature: 0.3
      max_tokens: 100
      variables:
        required:
          - customer_name

  # ===========================================================================
  # INLINE ANALYSIS FALLBACK RESPONSES
  # Used when LLM is unavailable in _get_inline_data_analysis()
  # ===========================================================================

  - key: pharmacy.data_query.fallback.product_found
    name: Product Found in Debt
    description: Response when product is found in customer debt
    version: "1.0.0"
    template: |
      **{customer_name}**, encontrÃ© ese producto en tu cuenta:

      ðŸ’Š **{product_desc}**
      ðŸ’° Precio: ${amount}{invoice_info}

      Este es el precio registrado en tu Ãºltima compra a cuenta.
    metadata:
      temperature: 0.3
      max_tokens: 200
      variables:
        required:
          - customer_name
          - product_desc
          - amount
        optional:
          - invoice_info

  - key: pharmacy.data_query.fallback.product_not_found
    name: Product Not Found
    description: Response when requested product is not in debt
    version: "1.0.0"
    template: |
      **{customer_name}**, no tengo informaciÃ³n del precio de ese producto.

      ðŸ“‹ **Â¿QuÃ© puedo hacer por ti?**
      Solo tengo acceso a informaciÃ³n de productos que ya compraste a cuenta en la farmacia.

      ðŸ’¡ **Para consultar precios:**
      Te recomiendo visitar la farmacia o comunicarte directamente con ellos.

      ðŸ“Š Si deseas ver los productos que tienes en tu cuenta, escribe *deuda*.
    metadata:
      temperature: 0.3
      max_tokens: 250
      variables:
        required:
          - customer_name

  - key: pharmacy.data_query.fallback.highest_item
    name: Highest Value Item Response
    description: Response showing the highest value individual item
    version: "1.0.0"
    template: |
      **{customer_name}**, segÃºn tu deuda actual:

      ðŸ’Š El producto con mayor importe pendiente es:
      **{item_desc}** - ${amount}{invoice_info}

      ðŸ“Š Total de tu deuda: ${total_debt}
    metadata:
      temperature: 0.3
      max_tokens: 200
      variables:
        required:
          - customer_name
          - item_desc
          - amount
          - total_debt
        optional:
          - invoice_info

  - key: pharmacy.data_query.fallback.highest_invoice
    name: Highest Value Invoice Response
    description: Response showing the invoice with highest total
    version: "1.0.0"
    template: |
      **{customer_name}**, segÃºn tu deuda actual:

      ðŸ“„ Tu mayor deuda es la factura **{invoice_number}** con un total de **${invoice_total}**{date_info}

      **Productos en esta factura:**
      {products_text}

      ðŸ“Š Total de tu deuda: ${total_debt}
      ðŸ“¦ Distribuida en {invoice_count} facturas
    metadata:
      temperature: 0.3
      max_tokens: 400
      variables:
        required:
          - customer_name
          - invoice_number
          - invoice_total
          - products_text
          - total_debt
          - invoice_count
        optional:
          - date_info

  - key: pharmacy.data_query.fallback.quantity
    name: Product Quantity Response
    description: Response showing count of pending products
    version: "1.0.0"
    template: |
      **{customer_name}**, tienes **{item_count} productos** pendientes de pago.{invoice_summary}

      Total: ${total_debt}
    metadata:
      temperature: 0.3
      max_tokens: 150
      variables:
        required:
          - customer_name
          - item_count
          - total_debt
        optional:
          - invoice_summary

  - key: pharmacy.data_query.fallback.summary
    name: Default Summary Response
    description: Default summary response with account overview
    version: "1.0.0"
    template: |
      **{customer_name}**, aquÃ­ estÃ¡ la informaciÃ³n de tu cuenta:

      ðŸ“¦ **Productos pendientes:** {item_count}
      ðŸ’° **Total:** ${total_debt}
      ðŸ’Š **Mayor producto:** {highest_item_text}{highest_invoice_text}

      Â¿Necesitas mÃ¡s detalles? Escribe *deuda* para ver el listado completo.
    metadata:
      temperature: 0.3
      max_tokens: 250
      variables:
        required:
          - customer_name
          - item_count
          - total_debt
          - highest_item_text
        optional:
          - highest_invoice_text

